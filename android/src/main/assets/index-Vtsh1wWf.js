var ai=Object.defineProperty;var ci=(e,t,n)=>t in e?ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Oe=(e,t,n)=>ci(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function ot(){}function Cr(e){return e()}function er(){return Object.create(null)}function xt(e){e.forEach(Cr)}function Ir(e){return typeof e=="function"}function li(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let $t;function tr(e,t){return e===t?!0:($t||($t=document.createElement("a")),$t.href=t,e===$t.href)}function fi(e){return Object.keys(e).length===0}function $(e,t){e.appendChild(t)}function Ke(e,t,n){e.insertBefore(t,n||null)}function Ce(e){e.parentNode&&e.parentNode.removeChild(e)}function ui(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function N(e){return document.createElement(e)}function he(e){return document.createTextNode(e)}function F(){return he(" ")}function Pe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function j(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function di(e){return Array.from(e.childNodes)}function ft(e,t){t=""+t,e.data!==t&&(e.data=t)}function Xe(e,t){e.value=t??""}let mt;function yt(e){mt=e}function hi(){if(!mt)throw new Error("Function called outside component initialization");return mt}function gi(e){hi().$$.on_mount.push(e)}const tt=[],nr=[];let rt=[];const rr=[],pi=Promise.resolve();let hn=!1;function wi(){hn||(hn=!0,pi.then(Ur))}function gn(e){rt.push(e)}const Xt=new Set;let Qe=0;function Ur(){if(Qe!==0)return;const e=mt;do{try{for(;Qe<tt.length;){const t=tt[Qe];Qe++,yt(t),yi(t.$$)}}catch(t){throw tt.length=0,Qe=0,t}for(yt(null),tt.length=0,Qe=0;nr.length;)nr.pop()();for(let t=0;t<rt.length;t+=1){const n=rt[t];Xt.has(n)||(Xt.add(n),n())}rt.length=0}while(tt.length);for(;rr.length;)rr.pop()();hn=!1,Xt.clear(),yt(e)}function yi(e){if(e.fragment!==null){e.update(),xt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(gn)}}function bi(e){const t=[],n=[];rt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),rt=t}const mi=new Set;function vi(e,t){e&&e.i&&(mi.delete(e),e.i(t))}function or(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ei(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),gn(()=>{const i=e.$$.on_mount.map(Cr).filter(Ir);e.$$.on_destroy?e.$$.on_destroy.push(...i):xt(i),e.$$.on_mount=[]}),o.forEach(gn)}function xi(e,t){const n=e.$$;n.fragment!==null&&(bi(n.after_update),xt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ai(e,t){e.$$.dirty[0]===-1&&(tt.push(e),wi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _i(e,t,n,r,o,i,s=null,a=[-1]){const c=mt;yt(e);const l=e.$$={fragment:null,ctx:[],props:i,update:ot,not_equal:o,bound:er(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:er(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};s&&s(l.root);let u=!1;if(l.ctx=n?n(e,t.props||{},(f,d,...p)=>{const w=p.length?p[0]:d;return l.ctx&&o(l.ctx[f],l.ctx[f]=w)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](w),u&&Ai(e,f)),d}):[],l.update(),u=!0,xt(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=di(t.target);l.fragment&&l.fragment.l(f),f.forEach(Ce)}else l.fragment&&l.fragment.c();t.intro&&vi(e.$$.fragment),Ei(e,t.target,t.anchor),Ur()}yt(c)}class Li{constructor(){Oe(this,"$$");Oe(this,"$$set")}$destroy(){xi(this,1),this.$destroy=ot}$on(t,n){if(!Ir(n))return ot;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!fi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pi);/*! Capacitor: https://capacitorjs.com/ - MIT License */const $i=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},r=(i,s)=>{n.platforms.set(i,s)},o=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=r,n.setPlatform=o,n},ki=e=>e.CapacitorPlatforms=$i(e),Tr=ki(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});Tr.addPlatform;Tr.setPlatform;var it;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(it||(it={}));let Qt=class extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}};const Bi=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Si=e=>{var t,n,r,o,i;const s=e.CapacitorCustomPlatform||null,a=e.Capacitor||{},c=a.Plugins=a.Plugins||{},l=e.CapacitorPlatforms,u=()=>s!==null?s.name:Bi(e),f=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||u,d=()=>f()!=="web",p=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||d,w=y=>{const v=O.get(y);return!!(v!=null&&v.platforms.has(f())||b(y))},h=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||w,g=y=>{var v;return(v=a.PluginHeaders)===null||v===void 0?void 0:v.find(H=>H.name===y)},b=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.getPluginHeader)||g,P=y=>e.console.error(y),k=(y,v,H)=>Promise.reject(`${H} does not have an implementation of "${v}".`),O=new Map,T=(y,v={})=>{const H=O.get(y);if(H)return console.warn(`Capacitor plugin "${y}" already registered. Cannot register plugins twice.`),H.proxy;const E=f(),L=b(y);let U;const M=async()=>(!U&&E in v?U=typeof v[E]=="function"?U=await v[E]():U=v[E]:s!==null&&!U&&"web"in v&&(U=typeof v.web=="function"?U=await v.web():U=v.web),U),q=(A,S)=>{var I,V;if(L){const W=L==null?void 0:L.methods.find(D=>S===D.name);if(W)return W.rtype==="promise"?D=>a.nativePromise(y,S.toString(),D):(D,X)=>a.nativeCallback(y,S.toString(),D,X);if(A)return(I=A[S])===null||I===void 0?void 0:I.bind(A)}else{if(A)return(V=A[S])===null||V===void 0?void 0:V.bind(A);throw new Qt(`"${y}" plugin is not implemented on ${E}`,it.Unimplemented)}},m=A=>{let S;const I=(...V)=>{const W=M().then(D=>{const X=q(D,A);if(X){const G=X(...V);return S=G==null?void 0:G.remove,G}else throw new Qt(`"${y}.${A}()" is not implemented on ${E}`,it.Unimplemented)});return A==="addListener"&&(W.remove=async()=>S()),W};return I.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(I,"name",{value:A,writable:!1,configurable:!1}),I},x=m("addListener"),B=m("removeListener"),R=(A,S)=>{const I=x({eventName:A},S),V=async()=>{const D=await I;B({eventName:A,callbackId:D},S)},W=new Promise(D=>I.then(()=>D({remove:V})));return W.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await V()},W},C=new Proxy({},{get(A,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?R:x;case"removeListener":return B;default:return m(S)}}});return c[y]=C,O.set(y,{name:y,proxy:C,platforms:new Set([...Object.keys(v),...L?[E]:[]])}),C},_=((i=l==null?void 0:l.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||T;return a.convertFileSrc||(a.convertFileSrc=y=>y),a.getPlatform=f,a.handleError=P,a.isNativePlatform=p,a.isPluginAvailable=h,a.pluginMethodNoop=k,a.registerPlugin=_,a.Exception=Qt,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},Ci=e=>e.Capacitor=Si(e),Ct=Ci(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),$n=Ct.registerPlugin;Ct.Plugins;let Or=class{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,n);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const o=this.listeners[t];if(!o){if(r){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}o.forEach(i=>i(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new Ct.Exception(t,it.Unimplemented)}unavailable(t="not available"){return new Ct.Exception(t,it.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const o=r.indexOf(n);this.listeners[t].splice(o,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}};const ir=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),sr=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);let Ii=class extends Or{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[o,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=sr(o).trim(),i=sr(i).trim(),n[o]=i}),n}async setCookie(t){try{const n=ir(t.key),r=ir(t.value),o=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${o}; path=${i}; ${s};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}};$n("CapacitorCookies",{web:()=>new Ii});const Ui=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const o=r.result;t(o.indexOf(",")>=0?o.split(",")[1]:o)},r.onerror=o=>n(o),r.readAsDataURL(e)}),Ti=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(o=>o.toLocaleLowerCase()).reduce((o,i,s)=>(o[i]=e[t[s]],o),{})},Oi=(e,t=!0)=>e?Object.entries(e).reduce((r,o)=>{const[i,s]=o;let a,c;return Array.isArray(s)?(c="",s.forEach(l=>{a=t?encodeURIComponent(l):l,c+=`${i}=${a}&`}),c.slice(0,-1)):(a=t?encodeURIComponent(s):s,c=`${i}=${a}`),`${r}&${c}`},"").substr(1):null,Ri=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),o=Ti(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))i.set(s,a);n.body=i.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((a,c)=>{i.append(c,a)});else for(const a of Object.keys(e.data))i.append(a,e.data[a]);n.body=i;const s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(o.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};let Hi=class extends Or{async request(t){const n=Ri(t,t.webFetchExtra),r=Oi(t.params,t.shouldEncodeUrlParams),o=r?`${t.url}?${r}`:t.url,i=await fetch(o,n),s=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?t:{};s.includes("application/json")&&(a="json");let c,l;switch(a){case"arraybuffer":case"blob":l=await i.blob(),c=await Ui(l);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const u={};return i.headers.forEach((f,d)=>{u[d]=f}),{data:c,headers:u,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}};$n("CapacitorHttp",{web:()=>new Hi});const Le=$n("NostrSignerPlugin");/*! Capacitor: https://capacitorjs.com/ - MIT License */const Ni=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},r=(i,s)=>{n.platforms.set(i,s)},o=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=r,n.setPlatform=o,n},ji=e=>e.CapacitorPlatforms=Ni(e),Rr=ji(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});Rr.addPlatform;Rr.setPlatform;var st;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(st||(st={}));class en extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const Mi=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},qi=e=>{var t,n,r,o,i;const s=e.CapacitorCustomPlatform||null,a=e.Capacitor||{},c=a.Plugins=a.Plugins||{},l=e.CapacitorPlatforms,u=()=>s!==null?s.name:Mi(e),f=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||u,d=()=>f()!=="web",p=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||d,w=y=>{const v=O.get(y);return!!(v!=null&&v.platforms.has(f())||b(y))},h=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||w,g=y=>{var v;return(v=a.PluginHeaders)===null||v===void 0?void 0:v.find(H=>H.name===y)},b=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.getPluginHeader)||g,P=y=>e.console.error(y),k=(y,v,H)=>Promise.reject(`${H} does not have an implementation of "${v}".`),O=new Map,T=(y,v={})=>{const H=O.get(y);if(H)return console.warn(`Capacitor plugin "${y}" already registered. Cannot register plugins twice.`),H.proxy;const E=f(),L=b(y);let U;const M=async()=>(!U&&E in v?U=typeof v[E]=="function"?U=await v[E]():U=v[E]:s!==null&&!U&&"web"in v&&(U=typeof v.web=="function"?U=await v.web():U=v.web),U),q=(A,S)=>{var I,V;if(L){const W=L==null?void 0:L.methods.find(D=>S===D.name);if(W)return W.rtype==="promise"?D=>a.nativePromise(y,S.toString(),D):(D,X)=>a.nativeCallback(y,S.toString(),D,X);if(A)return(I=A[S])===null||I===void 0?void 0:I.bind(A)}else{if(A)return(V=A[S])===null||V===void 0?void 0:V.bind(A);throw new en(`"${y}" plugin is not implemented on ${E}`,st.Unimplemented)}},m=A=>{let S;const I=(...V)=>{const W=M().then(D=>{const X=q(D,A);if(X){const G=X(...V);return S=G==null?void 0:G.remove,G}else throw new en(`"${y}.${A}()" is not implemented on ${E}`,st.Unimplemented)});return A==="addListener"&&(W.remove=async()=>S()),W};return I.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(I,"name",{value:A,writable:!1,configurable:!1}),I},x=m("addListener"),B=m("removeListener"),R=(A,S)=>{const I=x({eventName:A},S),V=async()=>{const D=await I;B({eventName:A,callbackId:D},S)},W=new Promise(D=>I.then(()=>D({remove:V})));return W.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await V()},W},C=new Proxy({},{get(A,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?R:x;case"removeListener":return B;default:return m(S)}}});return c[y]=C,O.set(y,{name:y,proxy:C,platforms:new Set([...Object.keys(v),...L?[E]:[]])}),C},_=((i=l==null?void 0:l.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||T;return a.convertFileSrc||(a.convertFileSrc=y=>y),a.getPlatform=f,a.handleError=P,a.isNativePlatform=p,a.isPluginAvailable=h,a.pluginMethodNoop=k,a.registerPlugin=_,a.Exception=en,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},Di=e=>e.Capacitor=qi(e),$e=Di(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Hr=$e.registerPlugin;$e.Plugins;class Nr{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,n);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const o=this.listeners[t];if(!o){if(r){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}o.forEach(i=>i(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new $e.Exception(t,st.Unimplemented)}unavailable(t="not available"){return new $e.Exception(t,st.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const o=r.indexOf(n);this.listeners[t].splice(o,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const ar=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),cr=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Vi extends Nr{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[o,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=cr(o).trim(),i=cr(i).trim(),n[o]=i}),n}async setCookie(t){try{const n=ar(t.key),r=ar(t.value),o=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${o}; path=${i}; ${s};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Hr("CapacitorCookies",{web:()=>new Vi});const Ki=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const o=r.result;t(o.indexOf(",")>=0?o.split(",")[1]:o)},r.onerror=o=>n(o),r.readAsDataURL(e)}),Wi=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(o=>o.toLocaleLowerCase()).reduce((o,i,s)=>(o[i]=e[t[s]],o),{})},zi=(e,t=!0)=>e?Object.entries(e).reduce((r,o)=>{const[i,s]=o;let a,c;return Array.isArray(s)?(c="",s.forEach(l=>{a=t?encodeURIComponent(l):l,c+=`${i}=${a}&`}),c.slice(0,-1)):(a=t?encodeURIComponent(s):s,c=`${i}=${a}`),`${r}&${c}`},"").substr(1):null,Fi=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),o=Wi(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))i.set(s,a);n.body=i.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((a,c)=>{i.append(c,a)});else for(const a of Object.keys(e.data))i.append(a,e.data[a]);n.body=i;const s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(o.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class Gi extends Nr{async request(t){const n=Fi(t,t.webFetchExtra),r=zi(t.params,t.shouldEncodeUrlParams),o=r?`${t.url}?${r}`:t.url,i=await fetch(o,n),s=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?t:{};s.includes("application/json")&&(a="json");let c,l;switch(a){case"arraybuffer":case"blob":l=await i.blob(),c=await Ki(l);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const u={};return i.headers.forEach((f,d)=>{u[d]=f}),{data:c,headers:u,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Hr("CapacitorHttp",{web:()=>new Gi});function lr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function jr(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Zi(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");lr(e.outputLen),lr(e.blockLen)}function It(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ji(e,t){jr(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const tn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mr=e=>e instanceof Uint8Array,nn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ye=(e,t)=>e<<32-t|e>>>t,Yi=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Yi)throw new Error("Non little-endian hardware is not supported");function Xi(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function kn(e){if(typeof e=="string"&&(e=Xi(e)),!Mr(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Qi(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Mr(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let qr=class{clone(){return this._cloneInto()}};function es(e){const t=r=>e().update(kn(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Dr(e=32){if(tn&&typeof tn.getRandomValues=="function")return tn.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function ts(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,l=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+l,a,r)}let ns=class extends qr{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=nn(this.buffer)}update(t){It(this);const{view:n,buffer:r,blockLen:o}=this;t=kn(t);const i=t.length;for(let s=0;s<i;){const a=Math.min(o-this.pos,i-s);if(a===o){const c=nn(t);for(;o<=i-s;s+=o)this.process(c,s);continue}r.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){It(this),Ji(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let f=s;f<o;f++)n[f]=0;ts(r,o-8,BigInt(this.length*8),i),this.process(r,0);const a=nn(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:a}=this;return t.length=o,t.pos=a,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}};const rs=(e,t,n)=>e&t^~e&n,os=(e,t,n)=>e&t^e&n^t&n,is=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Re=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),He=new Uint32Array(64);let ss=class extends ns{constructor(){super(64,32,8,!1),this.A=Re[0]|0,this.B=Re[1]|0,this.C=Re[2]|0,this.D=Re[3]|0,this.E=Re[4]|0,this.F=Re[5]|0,this.G=Re[6]|0,this.H=Re[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:a,H:c}=this;return[t,n,r,o,i,s,a,c]}set(t,n,r,o,i,s,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)He[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=He[f-15],p=He[f-2],w=ye(d,7)^ye(d,18)^d>>>3,h=ye(p,17)^ye(p,19)^p>>>10;He[f]=h+He[f-7]+w+He[f-16]|0}let{A:r,B:o,C:i,D:s,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=ye(a,6)^ye(a,11)^ye(a,25),p=u+d+rs(a,c,l)+is[f]+He[f]|0,h=(ye(r,2)^ye(r,13)^ye(r,22))+os(r,o,i)|0;u=l,l=c,c=a,a=s+p|0,s=i,i=o,o=r,r=p+h|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,o,i,s,a,c,l,u)}roundClean(){He.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const pn=es(()=>new ss);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vr=BigInt(0),Ht=BigInt(1),as=BigInt(2),Nt=e=>e instanceof Uint8Array,cs=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function at(e){if(!Nt(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=cs[e[n]];return t}function Kr(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Bn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function ct(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function fe(e){return Bn(at(e))}function Sn(e){if(!Nt(e))throw new Error("Uint8Array expected");return Bn(at(Uint8Array.from(e).reverse()))}function De(e,t){return ct(e.toString(16).padStart(t*2,"0"))}function Cn(e,t){return De(e,t).reverse()}function ls(e){return ct(Kr(e))}function re(e,t,n){let r;if(typeof t=="string")try{r=ct(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Nt(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Ye(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Nt(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function fs(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function us(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ds(e){let t;for(t=0;e>Vr;e>>=Ht,t+=1);return t}function hs(e,t){return e>>BigInt(t)&Ht}const gs=(e,t,n)=>e|(n?Ht:Vr)<<BigInt(t),In=e=>(as<<BigInt(e-1))-Ht,rn=e=>new Uint8Array(e),fr=e=>Uint8Array.from(e);function Wr(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=rn(e),o=rn(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...f)=>n(o,r,...f),c=(f=rn())=>{o=a(fr([0]),f),r=a(),f.length!==0&&(o=a(fr([1]),f),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<t;){r=a();const p=r.slice();d.push(p),f+=r.length}return Ye(...d)};return(f,d)=>{s(),c(f);let p;for(;!(p=d(l()));)c();return s(),p}}const ps={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function At(e,t,n={}){const r=(o,i,s)=>{const a=ps[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=e[o];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}const ws=Object.freeze(Object.defineProperty({__proto__:null,bitGet:hs,bitLen:ds,bitMask:In,bitSet:gs,bytesToHex:at,bytesToNumberBE:fe,bytesToNumberLE:Sn,concatBytes:Ye,createHmacDrbg:Wr,ensureBytes:re,equalBytes:fs,hexToBytes:ct,hexToNumber:Bn,numberToBytesBE:De,numberToBytesLE:Cn,numberToHexUnpadded:Kr,numberToVarBytesBE:ls,utf8ToBytes:us,validateObject:At},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ee=BigInt(0),J=BigInt(1),Ze=BigInt(2),ys=BigInt(3),wn=BigInt(4),ur=BigInt(5),dr=BigInt(8);BigInt(9);BigInt(16);function ne(e,t){const n=e%t;return n>=ee?n:t+n}function bs(e,t,n){if(n<=ee||t<ee)throw new Error("Expected power/modulo > 0");if(n===J)return ee;let r=J;for(;t>ee;)t&J&&(r=r*e%n),e=e*e%n,t>>=J;return r}function ue(e,t,n){let r=e;for(;t-- >ee;)r*=r,r%=n;return r}function yn(e,t){if(e===ee||t<=ee)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=ne(e,t),r=t,o=ee,i=J;for(;n!==ee;){const a=r/n,c=r%n,l=o-i*a;r=n,n=c,o=i,i=l}if(r!==J)throw new Error("invert: does not exist");return ne(o,t)}function ms(e){const t=(e-J)/Ze;let n,r,o;for(n=e-J,r=0;n%Ze===ee;n/=Ze,r++);for(o=Ze;o<e&&bs(o,t,e)!==e-J;o++);if(r===1){const s=(e+J)/wn;return function(c,l){const u=c.pow(l,s);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+J)/Ze;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,o),n),f=a.pow(c,i),d=a.pow(c,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let p=1;for(let h=a.sqr(d);p<l&&!a.eql(h,a.ONE);p++)h=a.sqr(h);const w=a.pow(u,J<<BigInt(l-p-1));u=a.sqr(w),f=a.mul(f,w),d=a.mul(d,u),l=p}return f}}function vs(e){if(e%wn===ys){const t=(e+J)/wn;return function(r,o){const i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%dr===ur){const t=(e-ur)/dr;return function(r,o){const i=r.mul(o,Ze),s=r.pow(i,t),a=r.mul(o,s),c=r.mul(r.mul(a,Ze),s),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),o))throw new Error("Cannot find square root");return l}}return ms(e)}const Es=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xs(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Es.reduce((r,o)=>(r[o]="function",r),t);return At(e,n)}function As(e,t,n){if(n<ee)throw new Error("Expected power > 0");if(n===ee)return e.ONE;if(n===J)return t;let r=e.ONE,o=t;for(;n>ee;)n&J&&(r=e.mul(r,o)),o=e.sqr(o),n>>=J;return r}function _s(e,t){const n=new Array(t.length),r=t.reduce((i,s,a)=>e.is0(s)?i:(n[a]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,a)=>e.is0(s)?i:(n[a]=e.mul(i,n[a]),e.mul(i,s)),o),n}function zr(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ls(e,t,n=!1,r={}){if(e<=ee)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=zr(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=vs(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:In(o),ZERO:ee,ONE:J,create:c=>ne(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return ee<=c&&c<e},is0:c=>c===ee,isOdd:c=>(c&J)===J,neg:c=>ne(-c,e),eql:(c,l)=>c===l,sqr:c=>ne(c*c,e),add:(c,l)=>ne(c+l,e),sub:(c,l)=>ne(c-l,e),mul:(c,l)=>ne(c*l,e),pow:(c,l)=>As(a,c,l),div:(c,l)=>ne(c*yn(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>yn(c,e),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>_s(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?Cn(c,i):De(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?Sn(c):fe(c)}});return Object.freeze(a)}function Fr(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Gr(e){const t=Fr(e);return t+Math.ceil(t/2)}function Ps(e,t,n=!1){const r=e.length,o=Fr(t),i=Gr(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const s=n?fe(e):Sn(e),a=ne(s,t-J)+J;return n?Cn(a,o):De(a,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $s=BigInt(0),on=BigInt(1);function ks(e,t){const n=(o,i)=>{const s=i.negate();return o?s:i},r=o=>{const i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:n,unsafeLadder(o,i){let s=e.ZERO,a=o;for(;i>$s;)i&on&&(s=s.add(a)),a=a.double(),i>>=on;return s},precomputeWindow(o,i){const{windows:s,windowSize:a}=r(i),c=[];let l=o,u=l;for(let f=0;f<s;f++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(o,i,s){const{windows:a,windowSize:c}=r(o);let l=e.ZERO,u=e.BASE;const f=BigInt(2**o-1),d=2**o,p=BigInt(o);for(let w=0;w<a;w++){const h=w*c;let g=Number(s&f);s>>=p,g>c&&(g-=d,s+=on);const b=h,P=h+Math.abs(g)-1,k=w%2!==0,O=g<0;g===0?u=u.add(n(k,i[b])):l=l.add(n(O,i[P]))}return{p:l,f:u}},wNAFCached(o,i,s,a){const c=o._WINDOW_SIZE||1;let l=i.get(o);return l||(l=this.precomputeWindow(o,c),c!==1&&i.set(o,a(l))),this.wNAF(c,l,s)}}}function Zr(e){return xs(e.Fp),At(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zr(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bs(e){const t=Zr(e);At(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Ss,hexToBytes:Cs}=ws,Je={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Je;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Ss(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Je,n=typeof e=="string"?Cs(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:i}=Je._parseInt(n.subarray(2)),{d:s,l:a}=Je._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}},ke=BigInt(0),de=BigInt(1);BigInt(2);const hr=BigInt(3);BigInt(4);function Is(e){const t=Bs(e),{Fp:n}=t,r=t.toBytes||((w,h,g)=>{const b=h.toAffine();return Ye(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),o=t.fromBytes||(w=>{const h=w.subarray(1),g=n.fromBytes(h.subarray(0,n.BYTES)),b=n.fromBytes(h.subarray(n.BYTES,2*n.BYTES));return{x:g,y:b}});function i(w){const{a:h,b:g}=t,b=n.sqr(w),P=n.mul(b,w);return n.add(n.add(P,n.mul(w,h)),g)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(w){return typeof w=="bigint"&&ke<w&&w<t.n}function a(w){if(!s(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){const{allowedPrivateKeyLengths:h,nByteLength:g,wrapPrivateKey:b,n:P}=t;if(h&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=at(w)),typeof w!="string"||!h.includes(w.length))throw new Error("Invalid key");w=w.padStart(g*2,"0")}let k;try{k=typeof w=="bigint"?w:fe(re("private key",w,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof w}`)}return b&&(k=ne(k,P)),a(k),k}const l=new Map;function u(w){if(!(w instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(h,g,b){if(this.px=h,this.py=g,this.pz=b,h==null||!n.isValid(h))throw new Error("x required");if(g==null||!n.isValid(g))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required")}static fromAffine(h){const{x:g,y:b}=h||{};if(!h||!n.isValid(g)||!n.isValid(b))throw new Error("invalid affine point");if(h instanceof f)throw new Error("projective point not allowed");const P=k=>n.eql(k,n.ZERO);return P(g)&&P(b)?f.ZERO:new f(g,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const g=n.invertBatch(h.map(b=>b.pz));return h.map((b,P)=>b.toAffine(g[P])).map(f.fromAffine)}static fromHex(h){const g=f.fromAffine(o(re("pointHex",h)));return g.assertValidity(),g}static fromPrivateKey(h){return f.BASE.multiply(c(h))}_setWindowSize(h){this._WINDOW_SIZE=h,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:h,y:g}=this.toAffine();if(!n.isValid(h)||!n.isValid(g))throw new Error("bad point: x or y not FE");const b=n.sqr(g),P=i(h);if(!n.eql(b,P))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(n.isOdd)return!n.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){u(h);const{px:g,py:b,pz:P}=this,{px:k,py:O,pz:T}=h,_=n.eql(n.mul(g,T),n.mul(k,P)),y=n.eql(n.mul(b,T),n.mul(O,P));return _&&y}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:h,b:g}=t,b=n.mul(g,hr),{px:P,py:k,pz:O}=this;let T=n.ZERO,_=n.ZERO,y=n.ZERO,v=n.mul(P,P),H=n.mul(k,k),E=n.mul(O,O),L=n.mul(P,k);return L=n.add(L,L),y=n.mul(P,O),y=n.add(y,y),T=n.mul(h,y),_=n.mul(b,E),_=n.add(T,_),T=n.sub(H,_),_=n.add(H,_),_=n.mul(T,_),T=n.mul(L,T),y=n.mul(b,y),E=n.mul(h,E),L=n.sub(v,E),L=n.mul(h,L),L=n.add(L,y),y=n.add(v,v),v=n.add(y,v),v=n.add(v,E),v=n.mul(v,L),_=n.add(_,v),E=n.mul(k,O),E=n.add(E,E),v=n.mul(E,L),T=n.sub(T,v),y=n.mul(E,H),y=n.add(y,y),y=n.add(y,y),new f(T,_,y)}add(h){u(h);const{px:g,py:b,pz:P}=this,{px:k,py:O,pz:T}=h;let _=n.ZERO,y=n.ZERO,v=n.ZERO;const H=t.a,E=n.mul(t.b,hr);let L=n.mul(g,k),U=n.mul(b,O),M=n.mul(P,T),q=n.add(g,b),m=n.add(k,O);q=n.mul(q,m),m=n.add(L,U),q=n.sub(q,m),m=n.add(g,P);let x=n.add(k,T);return m=n.mul(m,x),x=n.add(L,M),m=n.sub(m,x),x=n.add(b,P),_=n.add(O,T),x=n.mul(x,_),_=n.add(U,M),x=n.sub(x,_),v=n.mul(H,m),_=n.mul(E,M),v=n.add(_,v),_=n.sub(U,v),v=n.add(U,v),y=n.mul(_,v),U=n.add(L,L),U=n.add(U,L),M=n.mul(H,M),m=n.mul(E,m),U=n.add(U,M),M=n.sub(L,M),M=n.mul(H,M),m=n.add(m,M),L=n.mul(U,m),y=n.add(y,L),L=n.mul(x,m),_=n.mul(q,_),_=n.sub(_,L),L=n.mul(q,U),v=n.mul(x,v),v=n.add(v,L),new f(_,y,v)}subtract(h){return this.add(h.negate())}is0(){return this.equals(f.ZERO)}wNAF(h){return p.wNAFCached(this,l,h,g=>{const b=n.invertBatch(g.map(P=>P.pz));return g.map((P,k)=>P.toAffine(b[k])).map(f.fromAffine)})}multiplyUnsafe(h){const g=f.ZERO;if(h===ke)return g;if(a(h),h===de)return this;const{endo:b}=t;if(!b)return p.unsafeLadder(this,h);let{k1neg:P,k1:k,k2neg:O,k2:T}=b.splitScalar(h),_=g,y=g,v=this;for(;k>ke||T>ke;)k&de&&(_=_.add(v)),T&de&&(y=y.add(v)),v=v.double(),k>>=de,T>>=de;return P&&(_=_.negate()),O&&(y=y.negate()),y=new f(n.mul(y.px,b.beta),y.py,y.pz),_.add(y)}multiply(h){a(h);let g=h,b,P;const{endo:k}=t;if(k){const{k1neg:O,k1:T,k2neg:_,k2:y}=k.splitScalar(g);let{p:v,f:H}=this.wNAF(T),{p:E,f:L}=this.wNAF(y);v=p.constTimeNegate(O,v),E=p.constTimeNegate(_,E),E=new f(n.mul(E.px,k.beta),E.py,E.pz),b=v.add(E),P=H.add(L)}else{const{p:O,f:T}=this.wNAF(g);b=O,P=T}return f.normalizeZ([b,P])[0]}multiplyAndAddUnsafe(h,g,b){const P=f.BASE,k=(T,_)=>_===ke||_===de||!T.equals(P)?T.multiplyUnsafe(_):T.multiply(_),O=k(this,g).add(k(h,b));return O.is0()?void 0:O}toAffine(h){const{px:g,py:b,pz:P}=this,k=this.is0();h==null&&(h=k?n.ONE:n.inv(P));const O=n.mul(g,h),T=n.mul(b,h),_=n.mul(P,h);if(k)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:O,y:T}}isTorsionFree(){const{h,isTorsionFree:g}=t;if(h===de)return!0;if(g)return g(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:g}=t;return h===de?this:g?g(f,this):this.multiplyUnsafe(t.h)}toRawBytes(h=!0){return this.assertValidity(),r(f,this,h)}toHex(h=!0){return at(this.toRawBytes(h))}}f.BASE=new f(t.Gx,t.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,p=ks(f,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:s}}function Us(e){const t=Zr(e);return At(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Ts(e){const t=Us(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(m){return ke<m&&m<n.ORDER}function a(m){return ne(m,r)}function c(m){return yn(m,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=Is({...t,toBytes(m,x,B){const R=x.toAffine(),C=n.toBytes(R.x),A=Ye;return B?A(Uint8Array.from([x.hasEvenY()?2:3]),C):A(Uint8Array.from([4]),C,n.toBytes(R.y))},fromBytes(m){const x=m.length,B=m[0],R=m.subarray(1);if(x===o&&(B===2||B===3)){const C=fe(R);if(!s(C))throw new Error("Point is not on curve");const A=f(C);let S=n.sqrt(A);const I=(S&de)===de;return(B&1)===1!==I&&(S=n.neg(S)),{x:C,y:S}}else if(x===i&&B===4){const C=n.fromBytes(R.subarray(0,n.BYTES)),A=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:C,y:A}}else throw new Error(`Point of length ${x} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),p=m=>at(De(m,t.nByteLength));function w(m){const x=r>>de;return m>x}function h(m){return w(m)?a(-m):m}const g=(m,x,B)=>fe(m.slice(x,B));class b{constructor(x,B,R){this.r=x,this.s=B,this.recovery=R,this.assertValidity()}static fromCompact(x){const B=t.nByteLength;return x=re("compactSignature",x,B*2),new b(g(x,0,B),g(x,B,2*B))}static fromDER(x){const{r:B,s:R}=Je.toSig(re("DER",x));return new b(B,R)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(x){return new b(this.r,this.s,x)}recoverPublicKey(x){const{r:B,s:R,recovery:C}=this,A=y(re("msgHash",x));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");const S=C===2||C===3?B+t.n:B;if(S>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const I=C&1?"03":"02",V=l.fromHex(I+p(S)),W=c(S),D=a(-A*W),X=a(R*W),G=l.BASE.multiplyAndAddUnsafe(V,D,X);if(!G)throw new Error("point at infinify");return G.assertValidity(),G}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ct(this.toDERHex())}toDERHex(){return Je.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ct(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const P={isValidPrivateKey(m){try{return u(m),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const m=Gr(t.n);return Ps(t.randomBytes(m),t.n)},precompute(m=8,x=l.BASE){return x._setWindowSize(m),x.multiply(BigInt(3)),x}};function k(m,x=!0){return l.fromPrivateKey(m).toRawBytes(x)}function O(m){const x=m instanceof Uint8Array,B=typeof m=="string",R=(x||B)&&m.length;return x?R===o||R===i:B?R===2*o||R===2*i:m instanceof l}function T(m,x,B=!0){if(O(m))throw new Error("first arg must be private key");if(!O(x))throw new Error("second arg must be public key");return l.fromHex(x).multiply(u(m)).toRawBytes(B)}const _=t.bits2int||function(m){const x=fe(m),B=m.length*8-t.nBitLength;return B>0?x>>BigInt(B):x},y=t.bits2int_modN||function(m){return a(_(m))},v=In(t.nBitLength);function H(m){if(typeof m!="bigint")throw new Error("bigint expected");if(!(ke<=m&&m<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return De(m,t.nByteLength)}function E(m,x,B=L){if(["recovered","canonical"].some(ie=>ie in B))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:C}=t;let{lowS:A,prehash:S,extraEntropy:I}=B;A==null&&(A=!0),m=re("msgHash",m),S&&(m=re("prehashed msgHash",R(m)));const V=y(m),W=u(x),D=[H(W),H(V)];if(I!=null){const ie=I===!0?C(n.BYTES):I;D.push(re("extraEntropy",ie))}const X=Ye(...D),G=V;function pe(ie){const xe=_(ie);if(!d(xe))return;const Fe=c(xe),Ae=l.BASE.multiply(xe).toAffine(),Q=a(Ae.x);if(Q===ke)return;const _e=a(Fe*a(G+Q*W));if(_e===ke)return;let Ge=(Ae.x===Q?0:2)|Number(Ae.y&de),ht=_e;return A&&w(_e)&&(ht=h(_e),Ge^=1),new b(Q,ht,Ge)}return{seed:X,k2sig:pe}}const L={lowS:t.lowS,prehash:!1},U={lowS:t.lowS,prehash:!1};function M(m,x,B=L){const{seed:R,k2sig:C}=E(m,x,B),A=t;return Wr(A.hash.outputLen,A.nByteLength,A.hmac)(R,C)}l.BASE._setWindowSize(8);function q(m,x,B,R=U){var Ae;const C=m;if(x=re("msgHash",x),B=re("publicKey",B),"strict"in R)throw new Error("options.strict was renamed to lowS");const{lowS:A,prehash:S}=R;let I,V;try{if(typeof C=="string"||C instanceof Uint8Array)try{I=b.fromDER(C)}catch(Q){if(!(Q instanceof Je.Err))throw Q;I=b.fromCompact(C)}else if(typeof C=="object"&&typeof C.r=="bigint"&&typeof C.s=="bigint"){const{r:Q,s:_e}=C;I=new b(Q,_e)}else throw new Error("PARSE");V=l.fromHex(B)}catch(Q){if(Q.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(A&&I.hasHighS())return!1;S&&(x=t.hash(x));const{r:W,s:D}=I,X=y(x),G=c(D),pe=a(X*G),ie=a(W*G),xe=(Ae=l.BASE.multiplyAndAddUnsafe(V,pe,ie))==null?void 0:Ae.toAffine();return xe?a(xe.x)===W:!1}return{CURVE:t,getPublicKey:k,getSharedSecret:T,sign:M,verify:q,ProjectivePoint:l,Signature:b,utils:P}}let Jr=class extends qr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Zi(t);const r=kn(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return It(this),this.iHash.update(t),this}digestInto(t){It(this),jr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Yr=(e,t,n)=>new Jr(e,t).update(n).digest();Yr.create=(e,t)=>new Jr(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Os(e){return{hash:e,hmac:(t,...n)=>Yr(e,t,Qi(...n)),randomBytes:Dr}}function Rs(e,t){const n=r=>Ts({...e,...Os(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ut=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Xr=BigInt(1),Tt=BigInt(2),gr=(e,t)=>(e+t/Tt)/t;function Qr(e){const t=jt,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,f=ue(u,n,t)*u%t,d=ue(f,n,t)*u%t,p=ue(d,Tt,t)*l%t,w=ue(p,o,t)*p%t,h=ue(w,i,t)*w%t,g=ue(h,a,t)*h%t,b=ue(g,c,t)*g%t,P=ue(b,a,t)*h%t,k=ue(P,n,t)*u%t,O=ue(k,s,t)*w%t,T=ue(O,r,t)*l%t,_=ue(T,Tt,t);if(!bn.eql(bn.sqr(_),e))throw new Error("Cannot find square root");return _}const bn=Ls(jt,void 0,void 0,{sqrt:Qr}),ut=Rs({a:BigInt(0),b:BigInt(7),Fp:bn,n:Ut,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ut,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Xr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=gr(i*e,t),c=gr(-r*e,t);let l=ne(e-a*n-c*o,t),u=ne(-a*r-c*i,t);const f=l>s,d=u>s;if(f&&(l=t-l),d&&(u=t-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},pn),Mt=BigInt(0),eo=e=>typeof e=="bigint"&&Mt<e&&e<jt,Hs=e=>typeof e=="bigint"&&Mt<e&&e<Ut,pr={};function Ot(e,...t){let n=pr[e];if(n===void 0){const r=pn(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Ye(r,r),pr[e]=n}return pn(Ye(n,...t))}const Un=e=>e.toRawBytes(!0).slice(1),mn=e=>De(e,32),sn=e=>ne(e,jt),vt=e=>ne(e,Ut),Tn=ut.ProjectivePoint,Ns=(e,t,n)=>Tn.BASE.multiplyAndAddUnsafe(e,t,n);function vn(e){let t=ut.utils.normPrivateKeyToScalar(e),n=Tn.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:vt(-t),bytes:Un(n)}}function to(e){if(!eo(e))throw new Error("bad x: need 0 < x < p");const t=sn(e*e),n=sn(t*e+BigInt(7));let r=Qr(n);r%Tt!==Mt&&(r=sn(-r));const o=new Tn(e,r,Xr);return o.assertValidity(),o}function no(...e){return vt(fe(Ot("BIP0340/challenge",...e)))}function js(e){return vn(e).bytes}function Ms(e,t,n=Dr(32)){const r=re("message",e),{bytes:o,scalar:i}=vn(t),s=re("auxRand",n,32),a=mn(i^fe(Ot("BIP0340/aux",s))),c=Ot("BIP0340/nonce",a,o,r),l=vt(fe(c));if(l===Mt)throw new Error("sign failed: k is zero");const{bytes:u,scalar:f}=vn(l),d=no(u,o,r),p=new Uint8Array(64);if(p.set(u,0),p.set(mn(vt(f+d*i)),32),!ro(p,r,o))throw new Error("sign: Invalid signature produced");return p}function ro(e,t,n){const r=re("signature",e,64),o=re("message",t),i=re("publicKey",n,32);try{const s=to(fe(i)),a=fe(r.subarray(0,32));if(!eo(a))return!1;const c=fe(r.subarray(32,64));if(!Hs(c))return!1;const l=no(mn(a),Un(s),o),u=Ns(s,c,vt(-l));return!(!u||!u.hasEvenY()||u.toAffine().x!==a)}catch{return!1}}const gt={getPublicKey:js,sign:Ms,verify:ro,utils:{randomPrivateKey:ut.utils.randomPrivateKey,lift_x:to,pointToBytes:Un,numberToBytesBE:De,bytesToNumberBE:fe,taggedHash:Ot,mod:ne}},an=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const On=e=>e instanceof Uint8Array,cn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),be=(e,t)=>e<<32-t|e>>>t,qs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!qs)throw new Error("Non little-endian hardware is not supported");const Ds=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Z(e){if(!On(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Ds[e[n]];return t}function lt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Vs(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Et(e){if(typeof e=="string"&&(e=Vs(e)),!On(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function qt(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!On(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class oo{clone(){return this._cloneInto()}}function io(e){const t=r=>e().update(Et(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function so(e=32){if(an&&typeof an.getRandomValues=="function")return an.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function En(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ks(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function ao(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Ws(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");En(e.outputLen),En(e.blockLen)}function zs(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Fs(e,t){ao(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ve={number:En,bool:Ks,bytes:ao,hash:Ws,exists:zs,output:Fs};function Gs(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,l=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+l,a,r)}class Zs extends oo{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=cn(this.buffer)}update(t){ve.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=Et(t);const i=t.length;for(let s=0;s<i;){const a=Math.min(o-this.pos,i-s);if(a===o){const c=cn(t);for(;o<=i-s;s+=o)this.process(c,s);continue}r.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ve.exists(this),ve.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let f=s;f<o;f++)n[f]=0;Gs(r,o-8,BigInt(this.length*8),i),this.process(r,0);const a=cn(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:a}=this;return t.length=o,t.pos=a,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}}const Js=(e,t,n)=>e&t^~e&n,Ys=(e,t,n)=>e&t^e&n^t&n,Xs=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ne=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),je=new Uint32Array(64);class co extends Zs{constructor(){super(64,32,8,!1),this.A=Ne[0]|0,this.B=Ne[1]|0,this.C=Ne[2]|0,this.D=Ne[3]|0,this.E=Ne[4]|0,this.F=Ne[5]|0,this.G=Ne[6]|0,this.H=Ne[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:a,H:c}=this;return[t,n,r,o,i,s,a,c]}set(t,n,r,o,i,s,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)je[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=je[f-15],p=je[f-2],w=be(d,7)^be(d,18)^d>>>3,h=be(p,17)^be(p,19)^p>>>10;je[f]=h+je[f-7]+w+je[f-16]|0}let{A:r,B:o,C:i,D:s,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=be(a,6)^be(a,11)^be(a,25),p=u+d+Js(a,c,l)+Xs[f]+je[f]|0,h=(be(r,2)^be(r,13)^be(r,22))+Ys(r,o,i)|0;u=l,l=c,c=a,a=s+p|0,s=i,i=o,o=r,r=p+h|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,o,i,s,a,c,l,u)}roundClean(){je.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Qs extends co{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const _t=io(()=>new co);io(()=>new Qs);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dt(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Ie(...e){const t=(o,i)=>s=>o(i(s)),n=Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),r=e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0);return{encode:n,decode:r}}function Ue(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(dt(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Te(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Dt(e,t="="){if(dt(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function lo(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function wr(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach(s=>{if(dt(s),s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let c=r;c<i.length;c++){const l=i[c],u=t*s+l;if(!Number.isSafeInteger(u)||t*s/t!==s||u-l!==t*s)throw new Error("convertRadix: carry overflow");if(s=u%n,i[c]=Math.floor(u/n),!Number.isSafeInteger(i[c])||i[c]*n+s!==u)throw new Error("convertRadix: carry overflow");if(a)i[c]?a=!1:r=c;else continue}if(o.push(s),a)break}for(let s=0;s<e.length-1&&e[s]===0;s++)o.push(0);return o.reverse()}const fo=(e,t)=>t?fo(t,e%t):e,Rt=(e,t)=>e+(t-fo(e,t));function xn(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Rt(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Rt(t,n)}`);let o=0,i=0;const s=2**n-1,a=[];for(const c of e){if(dt(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(o=o<<t|c,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)a.push((o>>i-n&s)>>>0);o&=2**i-1}if(o=o<<n-i&s,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function ea(e){return dt(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return wr(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(wr(t,e,2**8))}}}function We(e,t=!1){if(dt(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Rt(8,e)>32||Rt(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return xn(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(xn(n,e,8,t))}}}function yr(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const ta=Ie(We(4),Ue("0123456789ABCDEF"),Te("")),na=Ie(We(5),Ue("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Dt(5),Te(""));Ie(We(5),Ue("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Dt(5),Te(""));Ie(We(5),Ue("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Te(""),lo(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Se=Ie(We(6),Ue("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Dt(6),Te("")),ra=Ie(We(6),Ue("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Dt(6),Te("")),Rn=e=>Ie(ea(58),Ue(e),Te("")),An=Rn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Rn("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Rn("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const br=[0,2,3,5,6,7,9,10,11],oa={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=An.encode(r).padStart(br[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=br.indexOf(r.length),i=An.decode(r);for(let s=0;s<i.length-o;s++)if(i[s]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},_n=Ie(Ue("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Te("")),mr=[996825010,642813549,513874426,1027748829,705979059];function pt(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<mr.length;r++)(t>>r&1)===1&&(n^=mr[r]);return n}function vr(e,t,n=1){const r=e.length;let o=1;for(let i=0;i<r;i++){const s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=pt(o)^s>>5}o=pt(o);for(let i=0;i<r;i++)o=pt(o)^e.charCodeAt(i)&31;for(let i of t)o=pt(o)^i;for(let i=0;i<6;i++)o=pt(o);return o^=n,_n.encode(xn([o%2**30],30,5,!1))}function uo(e){const t=e==="bech32"?1:734539939,n=We(5),r=n.decode,o=n.encode,i=yr(r);function s(u,f,d=90){if(typeof u!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof u}`);if(!Array.isArray(f)||f.length&&typeof f[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof f}`);const p=u.length+7+f.length;if(d!==!1&&p>d)throw new TypeError(`Length ${p} exceeds limit ${d}`);return u=u.toLowerCase(),`${u}1${_n.encode(f)}${vr(u,f,t)}`}function a(u,f=90){if(typeof u!="string")throw new Error(`bech32.decode input should be string, not ${typeof u}`);if(u.length<8||f!==!1&&u.length>f)throw new TypeError(`Wrong string length: ${u.length} (${u}). Expected (8..${f})`);const d=u.toLowerCase();if(u!==d&&u!==u.toUpperCase())throw new Error("String must be lowercase or uppercase");u=d;const p=u.lastIndexOf("1");if(p===0||p===-1)throw new Error('Letter "1" must be present between prefix and data only');const w=u.slice(0,p),h=u.slice(p+1);if(h.length<6)throw new Error("Data must be at least 6 characters long");const g=_n.decode(h).slice(0,-6),b=vr(w,g,t);if(!h.endsWith(b))throw new Error(`Invalid checksum in ${u}: expected "${b}"`);return{prefix:w,words:g}}const c=yr(a);function l(u){const{prefix:f,words:d}=a(u,!1);return{prefix:f,words:d,bytes:r(d)}}return{encode:s,decode:a,decodeToBytes:l,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:i,toWords:o}}const Ve=uo("bech32");uo("bech32m");const ia={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},sa=Ie(We(4),Ue("0123456789abcdef"),Te(""),lo(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),aa={utf8:ia,hex:sa,base16:ta,base32:na,base64:Se,base64url:ra,base58:An,base58xmr:oa};`${Object.keys(aa).join(", ")}`;function ln(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Er(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function ca(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Be(e,...t){if(!ca(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const oe=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),la=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!la)throw new Error("Non little-endian hardware is not supported");function fa(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function ua(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const da=(e,t)=>(Object.assign(t,e),t),qe=16,ha=283;function Hn(e){return e<<1^ha&-(e>>7)}function nt(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(t&1),e=Hn(e);return n}const Ln=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=Hn(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return t})(),ga=Ln.map((e,t)=>Ln.indexOf(t)),pa=e=>e<<24|e>>>8,fn=e=>e<<8|e>>>24;function ho(e,t){if(e.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((l,u)=>t(e[u])),r=n.map(fn),o=r.map(fn),i=o.map(fn),s=new Uint32Array(256*256),a=new Uint32Array(256*256),c=new Uint16Array(256*256);for(let l=0;l<256;l++)for(let u=0;u<256;u++){const f=l*256+u;s[f]=n[l]^r[u],a[f]=o[l]^i[u],c[f]=e[l]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:o,T3:i,T01:s,T23:a}}const Nn=ho(Ln,e=>nt(e,3)<<24|e<<16|e<<8|nt(e,2)),go=ho(ga,e=>nt(e,11)<<24|nt(e,13)<<16|nt(e,9)<<8|nt(e,14)),wa=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=Hn(n))e[t]=n;return e})();function po(e){Be(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=Nn,r=oe(e),o=r.length,i=a=>Ee(n,a,a,a,a),s=new Uint32Array(t+28);s.set(r);for(let a=o;a<s.length;a++){let c=s[a-1];a%o===0?c=i(pa(c))^wa[a/o-1]:o>6&&a%o===4&&(c=i(c)),s[a]=s[a-o]^c}return s}function ya(e){const t=po(e),n=t.slice(),r=t.length,{sbox2:o}=Nn,{T0:i,T1:s,T2:a,T3:c}=go;for(let l=0;l<r;l+=4)for(let u=0;u<4;u++)n[l+u]=t[r-l-4+u];t.fill(0);for(let l=4;l<r-4;l++){const u=n[l],f=Ee(o,u,u,u,u);n[l]=i[f&255]^s[f>>>8&255]^a[f>>>16&255]^c[f>>>24]}return n}function Me(e,t,n,r,o,i){return e[n<<8&65280|r>>>8&255]^t[o>>>8&65280|i>>>24&255]}function Ee(e,t,n,r,o){return e[t&255|n&65280]|e[r>>>16&255|o>>>16&65280]<<16}function xr(e,t,n,r,o){const{sbox2:i,T01:s,T23:a}=Nn;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],o^=e[c++];const l=e.length/4-2;for(let w=0;w<l;w++){const h=e[c++]^Me(s,a,t,n,r,o),g=e[c++]^Me(s,a,n,r,o,t),b=e[c++]^Me(s,a,r,o,t,n),P=e[c++]^Me(s,a,o,t,n,r);t=h,n=g,r=b,o=P}const u=e[c++]^Ee(i,t,n,r,o),f=e[c++]^Ee(i,n,r,o,t),d=e[c++]^Ee(i,r,o,t,n),p=e[c++]^Ee(i,o,t,n,r);return{s0:u,s1:f,s2:d,s3:p}}function ba(e,t,n,r,o){const{sbox2:i,T01:s,T23:a}=go;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],o^=e[c++];const l=e.length/4-2;for(let w=0;w<l;w++){const h=e[c++]^Me(s,a,t,o,r,n),g=e[c++]^Me(s,a,n,t,o,r),b=e[c++]^Me(s,a,r,n,t,o),P=e[c++]^Me(s,a,o,r,n,t);t=h,n=g,r=b,o=P}const u=e[c++]^Ee(i,t,o,r,n),f=e[c++]^Ee(i,n,t,o,r),d=e[c++]^Ee(i,r,n,t,o),p=e[c++]^Ee(i,o,r,n,t);return{s0:u,s1:f,s2:d,s3:p}}function wo(e,t){if(!t)return new Uint8Array(e);if(Be(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function ma(e){if(Be(e),e.length%qe!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${qe}`)}function va(e,t,n){let r=e.length;const o=r%qe;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const i=oe(e);if(t){let c=qe-o;c||(c=qe),r=r+c}const s=wo(r,n),a=oe(s);return{b:i,o:a,out:s}}function Ea(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const o=e.subarray(0,-r);for(let i=0;i<r;i++)if(e[n-i-1]!==r)throw new Error("aes/pcks5: wrong padding");return o}function xa(e){const t=new Uint8Array(16),n=oe(t);t.set(e);const r=qe-e.length;for(let o=qe-r;o<qe;o++)t[o]=r;return n}const yo=da({blockSize:16,nonceLength:16},function(t,n,r={}){Be(t),Be(n,16);const o=!r.disablePadding;return{encrypt:(i,s)=>{const a=po(t),{b:c,o:l,out:u}=va(i,o,s),f=oe(n);let d=f[0],p=f[1],w=f[2],h=f[3],g=0;for(;g+4<=c.length;)d^=c[g+0],p^=c[g+1],w^=c[g+2],h^=c[g+3],{s0:d,s1:p,s2:w,s3:h}=xr(a,d,p,w,h),l[g++]=d,l[g++]=p,l[g++]=w,l[g++]=h;if(o){const b=xa(i.subarray(g*4));d^=b[0],p^=b[1],w^=b[2],h^=b[3],{s0:d,s1:p,s2:w,s3:h}=xr(a,d,p,w,h),l[g++]=d,l[g++]=p,l[g++]=w,l[g++]=h}return a.fill(0),u},decrypt:(i,s)=>{ma(i);const a=ya(t),c=oe(n),l=wo(i.length,s),u=oe(i),f=oe(l);let d=c[0],p=c[1],w=c[2],h=c[3];for(let g=0;g+4<=u.length;){const b=d,P=p,k=w,O=h;d=u[g+0],p=u[g+1],w=u[g+2],h=u[g+3];const{s0:T,s1:_,s2:y,s3:v}=ba(a,d,p,w,h);f[g++]=T^b,f[g++]=_^P,f[g++]=y^k,f[g++]=v^O}return a.fill(0),Ea(l,o)}}}),bo=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),Aa=bo("expand 16-byte k"),_a=bo("expand 32-byte k"),La=oe(Aa),mo=oe(_a);mo.slice();function K(e,t){return e<<t|e>>>32-t}function Pn(e){return e.byteOffset%4===0}const kt=64,Pa=16,vo=2**32-1,Ar=new Uint32Array;function $a(e,t,n,r,o,i,s,a){const c=o.length,l=new Uint8Array(kt),u=oe(l),f=Pn(o)&&Pn(i),d=f?oe(o):Ar,p=f?oe(i):Ar;for(let w=0;w<c;s++){if(e(t,n,r,u,s,a),s>=vo)throw new Error("arx: counter overflow");const h=Math.min(kt,c-w);if(f&&h===kt){const g=w/4;if(w%4!==0)throw new Error("arx: invalid block position");for(let b=0,P;b<Pa;b++)P=g+b,p[P]=d[P]^u[b];w+=kt;continue}for(let g=0,b;g<h;g++)b=w+g,i[b]=o[b]^l[g];w+=h}}function ka(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:i,rounds:s}=fa({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return ln(o),ln(s),Er(i),Er(n),(a,c,l,u,f=0)=>{Be(a),Be(c),Be(l);const d=l.length;if(u||(u=new Uint8Array(d)),Be(u),ln(f),f<0||f>=vo)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const p=[];let w=a.length,h,g;if(w===32)h=a.slice(),p.push(h),g=mo;else if(w===16&&n)h=new Uint8Array(32),h.set(a),h.set(a,16),g=La,p.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${w}`);Pn(c)||(c=c.slice(),p.push(c));const b=oe(h);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,b,oe(c.subarray(0,16)),b),c=c.subarray(16)}const P=16-o;if(P!==c.length)throw new Error(`arx: nonce must be ${P} or 16 bytes`);if(P!==12){const O=new Uint8Array(12);O.set(c,i?0:12-c.length),c=O,p.push(c)}const k=oe(c);for($a(e,g,b,k,l,u,f,s);p.length>0;)p.pop().fill(0);return u}}function Ba(e,t,n,r,o,i=20){let s=e[0],a=e[1],c=e[2],l=e[3],u=t[0],f=t[1],d=t[2],p=t[3],w=t[4],h=t[5],g=t[6],b=t[7],P=o,k=n[0],O=n[1],T=n[2],_=s,y=a,v=c,H=l,E=u,L=f,U=d,M=p,q=w,m=h,x=g,B=b,R=P,C=k,A=O,S=T;for(let V=0;V<i;V+=2)_=_+E|0,R=K(R^_,16),q=q+R|0,E=K(E^q,12),_=_+E|0,R=K(R^_,8),q=q+R|0,E=K(E^q,7),y=y+L|0,C=K(C^y,16),m=m+C|0,L=K(L^m,12),y=y+L|0,C=K(C^y,8),m=m+C|0,L=K(L^m,7),v=v+U|0,A=K(A^v,16),x=x+A|0,U=K(U^x,12),v=v+U|0,A=K(A^v,8),x=x+A|0,U=K(U^x,7),H=H+M|0,S=K(S^H,16),B=B+S|0,M=K(M^B,12),H=H+M|0,S=K(S^H,8),B=B+S|0,M=K(M^B,7),_=_+L|0,S=K(S^_,16),x=x+S|0,L=K(L^x,12),_=_+L|0,S=K(S^_,8),x=x+S|0,L=K(L^x,7),y=y+U|0,R=K(R^y,16),B=B+R|0,U=K(U^B,12),y=y+U|0,R=K(R^y,8),B=B+R|0,U=K(U^B,7),v=v+M|0,C=K(C^v,16),q=q+C|0,M=K(M^q,12),v=v+M|0,C=K(C^v,8),q=q+C|0,M=K(M^q,7),H=H+E|0,A=K(A^H,16),m=m+A|0,E=K(E^m,12),H=H+E|0,A=K(A^H,8),m=m+A|0,E=K(E^m,7);let I=0;r[I++]=s+_|0,r[I++]=a+y|0,r[I++]=c+v|0,r[I++]=l+H|0,r[I++]=u+E|0,r[I++]=f+L|0,r[I++]=d+U|0,r[I++]=p+M|0,r[I++]=w+q|0,r[I++]=h+m|0,r[I++]=g+x|0,r[I++]=b+B|0,r[I++]=P+R|0,r[I++]=k+C|0,r[I++]=O+A|0,r[I++]=T+S|0}const Eo=ka(Ba,{counterRight:!1,counterLength:4,allowShortKeys:!1});class xo extends oo{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ve.hash(t);const r=Et(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return ve.exists(this),this.iHash.update(t),this}digestInto(t){ve.exists(this),ve.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Vt=(e,t,n)=>new xo(e,t).update(n).digest();Vt.create=(e,t)=>new xo(e,t);function Sa(e,t,n){return ve.hash(e),Vt(e,Et(n),Et(t))}const un=new Uint8Array([0]),_r=new Uint8Array;function Ca(e,t,n,r=32){if(ve.hash(e),ve.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);n===void 0&&(n=_r);const i=new Uint8Array(o*e.outputLen),s=Vt.create(e,t),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let l=0;l<o;l++)un[0]=l+1,a.update(l===0?_r:c).update(n).update(un).digestInto(c),i.set(c,e.outputLen*l),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),un.fill(0),i.slice(0,r)}var Ia=Object.defineProperty,Y=(e,t)=>{for(var n in t)Ia(e,n,{get:t[n],enumerable:!0})},et=Symbol("verified"),Ua=e=>e instanceof Object;function Ao(e){if(!Ua(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}var Ta={};Y(Ta,{Queue:()=>Na,QueueNode:()=>_o,binarySearch:()=>jn,insertEventIntoAscendingList:()=>Ha,insertEventIntoDescendingList:()=>Ra,normalizeURL:()=>Oa,utf8Decoder:()=>me,utf8Encoder:()=>ge});var me=new TextDecoder("utf-8"),ge=new TextEncoder;function Oa(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function Ra(e,t){const[n,r]=jn(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:o.created_at-t.created_at);return r||e.splice(n,0,t),e}function Ha(e,t){const[n,r]=jn(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return r||e.splice(n,0,t),e}function jn(e,t){let n=0,r=e.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),i=t(e[o]);if(i===0)return[o,!0];i<0?r=o-1:n=o+1}return[n,!1]}var _o=class{constructor(e){Oe(this,"value");Oe(this,"next",null);Oe(this,"prev",null);this.value=e}},Na=class{constructor(){Oe(this,"first");Oe(this,"last");this.first=null,this.last=null}enqueue(e){const t=new _o(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},ja=class{generateSecretKey(){return gt.utils.randomPrivateKey()}getPublicKey(e){return Z(gt.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=Z(gt.getPublicKey(t)),n.id=bt(n),n.sig=Z(gt.sign(bt(n),t)),n[et]=!0,n}verifyEvent(e){if(typeof e[et]=="boolean")return e[et];const t=bt(e);if(t!==e.id)return e[et]=!1,!1;try{const n=gt.verify(e.sig,t,e.pubkey);return e[et]=n,n}catch{return e[et]=!1,!1}}};function Ma(e){if(!Ao(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function bt(e){let t=_t(ge.encode(Ma(e)));return Z(t)}var Kt=new ja;Kt.generateSecretKey;Kt.getPublicKey;var ze=Kt.finalizeEvent,Mn=Kt.verifyEvent,qa={};Y(qa,{Application:()=>qc,BadgeAward:()=>Ja,BadgeDefinition:()=>Tc,BlockedRelaysList:()=>mc,BookmarkList:()=>wc,Bookmarksets:()=>Cc,Calendar:()=>Gc,CalendarEventRSVP:()=>Zc,ChannelCreation:()=>Bo,ChannelHideMessage:()=>Io,ChannelMessage:()=>Co,ChannelMetadata:()=>So,ChannelMuteUser:()=>Uo,ClassifiedListing:()=>Kc,ClientAuth:()=>To,CommunitiesList:()=>yc,CommunityDefinition:()=>Xc,CommunityPostApproval:()=>ic,Contacts:()=>za,CreateOrUpdateProduct:()=>Hc,CreateOrUpdateStall:()=>Rc,Curationsets:()=>Ic,Date:()=>zc,DraftClassifiedListing:()=>Wc,DraftLong:()=>jc,Emojisets:()=>Mc,EncryptedDirectMessage:()=>Fa,EncryptedDirectMessages:()=>Ga,EventDeletion:()=>Za,FileMetadata:()=>Qa,FileServerPreference:()=>Ac,Followsets:()=>kc,GenericRepost:()=>Ya,Genericlists:()=>Bc,HTTPAuth:()=>Vn,Handlerinformation:()=>Yc,Handlerrecommendation:()=>Jc,Highlights:()=>dc,InterestsList:()=>Ec,Interestsets:()=>Oc,JobFeedback:()=>cc,JobRequest:()=>sc,JobResult:()=>ac,Label:()=>oc,LightningPubRPC:()=>Lc,LiveChatMessage:()=>ec,LiveEvent:()=>Dc,LongFormArticle:()=>Nc,Metadata:()=>Va,Mutelist:()=>hc,NWCWalletInfo:()=>_c,NWCWalletRequest:()=>Oo,NWCWalletResponse:()=>Pc,NostrConnect:()=>$c,OpenTimestamps:()=>Xa,Pinlist:()=>gc,ProblemTracker:()=>tc,ProfileBadges:()=>Uc,PublicChatsList:()=>bc,Reaction:()=>Dn,RecommendRelay:()=>Wa,RelayList:()=>pc,Relaysets:()=>Sc,Report:()=>nc,Reporting:()=>rc,Repost:()=>qn,SearchRelaysList:()=>vc,ShortTextNote:()=>Ka,Time:()=>Fc,UserEmojiList:()=>xc,UserStatuses:()=>Vc,Zap:()=>uc,ZapGoal:()=>lc,ZapRequest:()=>fc,classifyKind:()=>Da,isEphemeralKind:()=>$o,isParameterizedReplaceableKind:()=>ko,isRegularKind:()=>Lo,isReplaceableKind:()=>Po});function Lo(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function Po(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function $o(e){return 2e4<=e&&e<3e4}function ko(e){return 3e4<=e&&e<4e4}function Da(e){return Lo(e)?"regular":Po(e)?"replaceable":$o(e)?"ephemeral":ko(e)?"parameterized":"unknown"}var Va=0,Ka=1,Wa=2,za=3,Fa=4,Ga=4,Za=5,qn=6,Dn=7,Ja=8,Ya=16,Bo=40,So=41,Co=42,Io=43,Uo=44,Xa=1040,Qa=1063,ec=1311,tc=1971,nc=1984,rc=1984,oc=1985,ic=4550,sc=5999,ac=6999,cc=7e3,lc=9041,fc=9734,uc=9735,dc=9802,hc=1e4,gc=10001,pc=10002,wc=10003,yc=10004,bc=10005,mc=10006,vc=10007,Ec=10015,xc=10030,Ac=10096,_c=13194,Lc=21e3,To=22242,Oo=23194,Pc=23195,$c=24133,Vn=27235,kc=3e4,Bc=30001,Sc=30002,Cc=30003,Ic=30004,Uc=30008,Tc=30009,Oc=30015,Rc=30017,Hc=30018,Nc=30023,jc=30024,Mc=30030,qc=30078,Dc=30311,Vc=30315,Kc=30402,Wc=30403,zc=31922,Fc=31923,Gc=31924,Zc=31925,Jc=31989,Yc=31990,Xc=34550,Qc={};Y(Qc,{getHex64:()=>Kn,getInt:()=>Ro,getSubscriptionId:()=>el,matchEventId:()=>tl,matchEventKind:()=>rl,matchEventPubkey:()=>nl});function Kn(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Ro(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function el(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let i=r+1+o;return e.slice(r+1,i)}function tl(e,t){return t===Kn(e,"id")}function nl(e,t){return t===Kn(e,"pubkey")}function rl(e,t){return t===Ro(e,"kind")}var ol={};Y(ol,{makeAuthEvent:()=>il});function il(e,t){return{kind:To,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}var sl;try{sl=WebSocket}catch{}var al;try{al=WebSocket}catch{}var cl={};Y(cl,{BECH32_REGEX:()=>Ho,Bech32MaxSize:()=>Wn,decode:()=>Wt,encodeBytes:()=>zt,naddrEncode:()=>pl,neventEncode:()=>gl,noteEncode:()=>dl,nprofileEncode:()=>hl,npubEncode:()=>ul,nrelayEncode:()=>wl,nsecEncode:()=>fl});var Wn=5e3,Ho=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function ll(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function Wt(e){var o,i,s,a,c,l,u,f;let{prefix:t,words:n}=Ve.decode(e,Wn),r=new Uint8Array(Ve.fromWords(n));switch(t){case"nprofile":{let d=Bt(r);if(!((o=d[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Z(d[0][0]),relays:d[1]?d[1].map(p=>me.decode(p)):[]}}}case"nevent":{let d=Bt(r);if(!((i=d[0])!=null&&i[0]))throw new Error("missing TLV 0 for nevent");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(d[2]&&d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(d[3]&&d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Z(d[0][0]),relays:d[1]?d[1].map(p=>me.decode(p)):[],author:(s=d[2])!=null&&s[0]?Z(d[2][0]):void 0,kind:(a=d[3])!=null&&a[0]?parseInt(Z(d[3][0]),16):void 0}}}case"naddr":{let d=Bt(r);if(!((c=d[0])!=null&&c[0]))throw new Error("missing TLV 0 for naddr");if(!((l=d[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=d[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:me.decode(d[0][0]),pubkey:Z(d[2][0]),kind:parseInt(Z(d[3][0]),16),relays:d[1]?d[1].map(p=>me.decode(p)):[]}}}case"nrelay":{let d=Bt(r);if(!((f=d[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:me.decode(d[0][0])}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:Z(r)};default:throw new Error(`unknown prefix ${t}`)}}function Bt(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function fl(e){return zt("nsec",e)}function ul(e){return zt("npub",lt(e))}function dl(e){return zt("note",lt(e))}function Lt(e,t){let n=Ve.toWords(t);return Ve.encode(e,n,Wn)}function zt(e,t){return Lt(e,t)}function hl(e){let t=Ft({0:[lt(e.pubkey)],1:(e.relays||[]).map(n=>ge.encode(n))});return Lt("nprofile",t)}function gl(e){let t;e.kind!==void 0&&(t=ll(e.kind));let n=Ft({0:[lt(e.id)],1:(e.relays||[]).map(r=>ge.encode(r)),2:e.author?[lt(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return Lt("nevent",n)}function pl(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=Ft({0:[ge.encode(e.identifier)],1:(e.relays||[]).map(r=>ge.encode(r)),2:[lt(e.pubkey)],3:[new Uint8Array(t)]});return Lt("naddr",n)}function wl(e){let t=Ft({0:[ge.encode(e)]});return Lt("nrelay",t)}function Ft(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(n)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),qt(...t)}var yl={};Y(yl,{decrypt:()=>bl,encrypt:()=>No});async function No(e,t,n){const r=e instanceof Uint8Array?Z(e):e,o=ut.getSharedSecret(r,"02"+t),i=jo(o);let s=Uint8Array.from(so(16)),a=ge.encode(n),c=yo(i,s).encrypt(a),l=Se.encode(new Uint8Array(c)),u=Se.encode(new Uint8Array(s.buffer));return`${l}?iv=${u}`}async function bl(e,t,n){const r=e instanceof Uint8Array?Z(e):e;let[o,i]=n.split("?iv="),s=ut.getSharedSecret(r,"02"+t),a=jo(s),c=Se.decode(i),l=Se.decode(o),u=yo(a,c).decrypt(l);return me.decode(u)}function jo(e){return e.slice(1,33)}var ml={};Y(ml,{NIP05_REGEX:()=>Mo,isValid:()=>xl,queryProfile:()=>qo,searchDomain:()=>El,useFetchImplementation:()=>vl});var Mo=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Gt;try{Gt=fetch}catch{}function vl(e){Gt=e}async function El(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`;return(await(await Gt(n,{redirect:"error"})).json()).names}catch{return{}}}async function qo(e){var i;const t=e.match(Mo);if(!t)return null;const[n,r="_",o]=t;try{const s=`https://${o}/.well-known/nostr.json?name=${r}`,a=await(await Gt(s,{redirect:"error"})).json();let c=a.names[r];return c?{pubkey:c,relays:(i=a.relays)==null?void 0:i[c]}:null}catch{return null}}async function xl(e,t){let n=await qo(t);return n?n.pubkey===e:!1}var Al={};Y(Al,{parse:()=>_l});function _l(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const o=n[r],[i,s,a,c]=o,l={id:s,relays:a?[a]:[]},u=r===0,f=r===n.length-1;if(c==="root"){t.root=l;continue}if(c==="reply"){t.reply=l;continue}if(c==="mention"){t.mentions.push(l);continue}if(u){t.root=l;continue}if(f){t.reply=l;continue}t.mentions.push(l)}return t}var Ll={};Y(Ll,{fetchRelayInformation:()=>$l,useFetchImplementation:()=>Pl});var Do;try{Do=fetch}catch{}function Pl(e){Do=e}async function $l(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var kl={};Y(kl,{getPow:()=>Vo,minePow:()=>Bl});function Vo(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(r===0)t+=4;else{t+=Math.clz32(r)-28;break}}return t}function Bl(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const i=Math.floor(new Date().getTime()/1e3);if(i!==r.created_at&&(n=0,r.created_at=i),o[1]=(++n).toString(),r.id=bt(r),Vo(r.id)>=t)break}return r}var Sl={};Y(Sl,{finishRepostEvent:()=>Cl,getRepostedEvent:()=>Il,getRepostedEventPointer:()=>Ko});function Cl(e,t,n,r){return ze({kind:qn,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:e.content===""?"":JSON.stringify(t),created_at:e.created_at},r)}function Ko(e){if(e.kind!==qn)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(t!==void 0)return{id:t[1],relays:[t[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function Il(e,{skipVerification:t}={}){const n=Ko(e);if(n===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===n.id&&!(!t&&!Mn(r)))return r}var Ul={};Y(Ul,{NOSTR_URI_REGEX:()=>Zt,parse:()=>Ol,test:()=>Tl});var Zt=new RegExp(`nostr:(${Ho.source})`);function Tl(e){return typeof e=="string"&&new RegExp(`^${Zt.source}$`).test(e)}function Ol(e){const t=e.match(new RegExp(`^${Zt.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:Wt(t[1])}}var Rl={};Y(Rl,{finishReactionEvent:()=>Hl,getReactedEventPointer:()=>Nl});function Hl(e,t,n){const r=t.tags.filter(o=>o.length>=2&&(o[0]==="e"||o[0]==="p"));return ze({...e,kind:Dn,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function Nl(e){if(e.kind!==Dn)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var jl={};Y(jl,{matchAll:()=>Ml,regex:()=>zn,replaceAll:()=>ql});var zn=()=>new RegExp(`\\b${Zt.source}\\b`,"g");function*Ml(e){const t=e.matchAll(zn());for(const n of t)try{const[r,o]=n;yield{uri:r,value:o,decoded:Wt(o),start:n.index,end:n.index+r.length}}catch{}}function ql(e,t){return e.replaceAll(zn(),(n,r)=>t({uri:n,value:r,decoded:Wt(r)}))}var Dl={};Y(Dl,{channelCreateEvent:()=>Vl,channelHideMessageEvent:()=>zl,channelMessageEvent:()=>Wl,channelMetadataEvent:()=>Kl,channelMuteUserEvent:()=>Fl});var Vl=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ze({kind:Bo,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},Kl=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ze({kind:So,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Wl=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),ze({kind:Co,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},zl=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ze({kind:Io,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Fl=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ze({kind:Uo,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},Gl={};Y(Gl,{EMOJI_SHORTCODE_REGEX:()=>Wo,matchAll:()=>Zl,regex:()=>Fn,replaceAll:()=>Jl});var Wo=/:(\w+):/,Fn=()=>new RegExp(`\\B${Wo.source}\\B`,"g");function*Zl(e){const t=e.matchAll(Fn());for(const n of t)try{const[r,o]=n;yield{shortcode:r,name:o,start:n.index,end:n.index+r.length}}catch{}}function Jl(e,t){return e.replaceAll(Fn(),(n,r)=>t({shortcode:n,name:r}))}var Yl={};Y(Yl,{useFetchImplementation:()=>Xl,validateGithub:()=>Ql});var Gn;try{Gn=fetch}catch{}function Xl(e){Gn=e}async function Ql(e,t,n){try{return await(await Gn(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var ef={};Y(ef,{decrypt:()=>Xo,encrypt:()=>Yo,getConversationKey:()=>Go,v2:()=>sf});var zo=1,Fo=65535;function Go(e,t){const n=ut.getSharedSecret(e,"02"+t).subarray(1,33);return Sa(_t,n,"nip44-v2")}function Zo(e,t){const n=Ca(_t,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function Zn(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}function tf(e){if(!Number.isSafeInteger(e)||e<zo||e>Fo)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function nf(e){const t=ge.encode(e),n=t.length,r=tf(n),o=new Uint8Array(Zn(n)-n);return qt(r,t,o)}function rf(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<zo||t>Fo||n.length!==t||e.length!==2+Zn(t))throw new Error("invalid padding");return me.decode(n)}function Jo(e,t,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=qt(n,t);return Vt(_t,e,r)}function of(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let n;try{n=Se.decode(e)}catch(i){throw new Error("invalid base64: "+i.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const o=n[0];if(o!==2)throw new Error("unknown encryption version "+o);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function Yo(e,t,n=so(32)){const{chacha_key:r,chacha_nonce:o,hmac_key:i}=Zo(t,n),s=nf(e),a=Eo(r,o,s),c=Jo(i,a,n);return Se.encode(qt(new Uint8Array([2]),n,a,c))}function Xo(e,t){const{nonce:n,ciphertext:r,mac:o}=of(e),{chacha_key:i,chacha_nonce:s,hmac_key:a}=Zo(t,n),c=Jo(a,r,n);if(!ua(c,o))throw new Error("invalid MAC");const l=Eo(i,s,r);return rf(l)}var sf={utils:{getConversationKey:Go,calcPaddedLen:Zn},encrypt:Yo,decrypt:Xo},af={};Y(af,{makeNwcRequestEvent:()=>lf,parseConnectionString:()=>cf});function cf(e){const{pathname:t,searchParams:n}=new URL(e),r=t,o=n.get("relay"),i=n.get("secret");if(!r||!o||!i)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:i}}async function lf(e,t,n){const o=await No(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),i={kind:Oo,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]};return ze(i,t)}var ff={};Y(ff,{getZapEndpoint:()=>df,makeZapReceipt:()=>pf,makeZapRequest:()=>hf,useFetchImplementation:()=>uf,validateZapRequest:()=>gf});var Jn;try{Jn=fetch}catch{}function uf(e){Jn=e}async function df(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:s}=Ve.decode(n,1e3),a=Ve.fromWords(s);t=me.decode(a)}else if(r){let[s,a]=r.split("@");t=new URL(`/.well-known/lnurlp/${s}`,`https://${a}`).toString()}else return null;let i=await(await Jn(t)).json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch{}return null}function hf({profile:e,event:t,amount:n,relays:r,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let i={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&i.tags.push(["e",t]),i}function gf(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Ao(t))return"Zap request is not a valid Nostr event.";if(!Mn(t))return"Invalid signature on zap request.";let n=t.tags.find(([i,s])=>i==="p"&&s);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([i,s])=>i==="e"&&s);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([i,s])=>i==="relays"&&s)?null:"Zap request doesn't have a 'relays' tag."}function pf({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let o=JSON.parse(e),i=o.tags.filter(([a])=>a==="e"||a==="p"||a==="a"),s={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["P",o.pubkey],["bolt11",n],["description",e]]};return t&&s.tags.push(["preimage",t]),s}var wf={};Y(wf,{getToken:()=>yf,hashPayload:()=>Yn,unpackEventFromToken:()=>ei,validateEvent:()=>si,validateEventKind:()=>ni,validateEventMethodTag:()=>oi,validateEventPayloadTag:()=>ii,validateEventTimestamp:()=>ti,validateEventUrlTag:()=>ri,validateToken:()=>bf});var Qo="Nostr ";async function yf(e,t,n,r=!1,o){const i={kind:Vn,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};o&&i.tags.push(["payload",Yn(o)]);const s=await n(i);return(r?Qo:"")+Se.encode(ge.encode(JSON.stringify(s)))}async function bf(e,t,n){const r=await ei(e).catch(i=>{throw i});return await si(r,t,n).catch(i=>{throw i})}async function ei(e){if(!e)throw new Error("Missing token");e=e.replace(Qo,"");const t=me.decode(Se.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function ti(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function ni(e){return e.kind===Vn}function ri(e,t){const n=e.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===t:!1}function oi(e,t){const n=e.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===t.toLowerCase():!1}function Yn(e){const t=_t(ge.encode(JSON.stringify(e)));return Z(t)}function ii(e,t){const n=e.tags.find(o=>o[0]==="payload");if(!n)return!1;const r=Yn(t);return n.length>0&&n[1]===r}async function si(e,t,n,r){if(!Mn(e))throw new Error("Invalid nostr event, signature invalid");if(!ni(e))throw new Error("Invalid nostr event, kind invalid");if(!ti(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!ri(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!oi(e,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!ii(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var wt=new TextDecoder("utf-8");new TextEncoder;var mf=5e3;function dn(e){var o,i,s,a,c,l,u,f;let{prefix:t,words:n}=Ve.decode(e,mf),r=new Uint8Array(Ve.fromWords(n));switch(t){case"nprofile":{let d=St(r);if(!((o=d[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Z(d[0][0]),relays:d[1]?d[1].map(p=>wt.decode(p)):[]}}}case"nevent":{let d=St(r);if(!((i=d[0])!=null&&i[0]))throw new Error("missing TLV 0 for nevent");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(d[2]&&d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(d[3]&&d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Z(d[0][0]),relays:d[1]?d[1].map(p=>wt.decode(p)):[],author:(s=d[2])!=null&&s[0]?Z(d[2][0]):void 0,kind:(a=d[3])!=null&&a[0]?parseInt(Z(d[3][0]),16):void 0}}}case"naddr":{let d=St(r);if(!((c=d[0])!=null&&c[0]))throw new Error("missing TLV 0 for naddr");if(!((l=d[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=d[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:wt.decode(d[0][0]),pubkey:Z(d[2][0]),kind:parseInt(Z(d[3][0]),16),relays:d[1]?d[1].map(p=>wt.decode(p)):[]}}}case"nrelay":{let d=St(r);if(!((f=d[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:wt.decode(d[0][0])}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:Z(r)};default:throw new Error(`unknown prefix ${t}`)}}function St(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function Lr(e,t,n){const r=e.slice();return r[23]=t[n],r}function vf(e){let t;return{c(){t=N("p"),t.textContent="No signer apps installed."},m(n,r){Ke(n,t,r)},p:ot,d(n){n&&Ce(t)}}}function Ef(e){let t,n=or(e[8]),r=[];for(let o=0;o<n.length;o+=1)r[o]=Pr(Lr(e,n,o));return{c(){t=N("ul");for(let o=0;o<r.length;o+=1)r[o].c();j(t,"class","svelte-v1ygji")},m(o,i){Ke(o,t,i);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(t,null)},p(o,i){if(i&1280){n=or(o[8]);let s;for(s=0;s<n.length;s+=1){const a=Lr(o,n,s);r[s]?r[s].p(a,i):(r[s]=Pr(a),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(o){o&&Ce(t),ui(r,o)}}}function Pr(e){let t,n,r,o,i,s,a,c=e[23].name+"",l,u,f,d;function p(){return e[16](e[23])}return{c(){t=N("li"),n=N("button"),r=N("img"),s=F(),a=N("span"),l=he(c),u=F(),tr(r.src,o=`data:image/png;base64,${e[23].icon}`)||j(r,"src",o),j(r,"alt",i=e[23].name),j(r,"width","48"),j(r,"height","48"),j(r,"class","svelte-v1ygji"),j(a,"class","svelte-v1ygji"),j(n,"class","app-chooser svelte-v1ygji"),j(t,"class","svelte-v1ygji")},m(w,h){Ke(w,t,h),$(t,n),$(n,r),$(n,s),$(n,a),$(a,l),$(t,u),f||(d=Pe(n,"click",p),f=!0)},p(w,h){e=w,h&256&&!tr(r.src,o=`data:image/png;base64,${e[23].icon}`)&&j(r,"src",o),h&256&&i!==(i=e[23].name)&&j(r,"alt",i),h&256&&c!==(c=e[23].name+"")&&ft(l,c)},d(w){w&&Ce(t),f=!1,d()}}}function $r(e){let t,n,r,o,i;return{c(){t=N("div"),n=N("strong"),n.textContent="Public Key:",r=F(),o=N("p"),i=he(e[0]),j(o,"class","text-element"),j(t,"class","output svelte-v1ygji")},m(s,a){Ke(s,t,a),$(t,n),$(t,r),$(t,o),$(o,i)},p(s,a){a&1&&ft(i,s[0])},d(s){s&&Ce(t)}}}function kr(e){let t,n,r,o,i;return{c(){t=N("div"),n=N("strong"),n.textContent="Signed Event:",r=F(),o=N("p"),i=he(e[2]),j(o,"class","text-element"),j(t,"class","output svelte-v1ygji")},m(s,a){Ke(s,t,a),$(t,n),$(t,r),$(t,o),$(o,i)},p(s,a){a&4&&ft(i,s[2])},d(s){s&&Ce(t)}}}function Br(e){let t,n,r,o,i;return{c(){t=N("div"),n=N("strong"),n.textContent="Encrypted Message:",r=F(),o=N("p"),i=he(e[5]),j(o,"class","text-element"),j(t,"class","output svelte-v1ygji")},m(s,a){Ke(s,t,a),$(t,n),$(t,r),$(t,o),$(o,i)},p(s,a){a&32&&ft(i,s[5])},d(s){s&&Ce(t)}}}function Sr(e){let t,n,r,o,i;return{c(){t=N("div"),n=N("strong"),n.textContent="Decrypted Message:",r=F(),o=N("p"),i=he(e[6]),j(o,"class","text-element"),j(t,"class","output svelte-v1ygji")},m(s,a){Ke(s,t,a),$(t,n),$(t,r),$(t,o),$(o,i)},p(s,a){a&64&&ft(i,s[6])},d(s){s&&Ce(t)}}}function xf(e){let t,n,r,o,i,s,a,c,l,u,f,d,p,w,h,g,b,P,k,O,T,_,y,v,H,E,L,U,M,q,m,x,B,R,C,A,S,I,V,W,D=e[9]?"NIP-44":"NIP-04",X,G,pe,ie,xe,Fe,Ae,Q,_e,Ge,ht,Jt,Yt,Xn;function Qn(z,te){return z[8].length>0?Ef:vf}let Pt=Qn(e),we=Pt(e),se=e[0]&&$r(e),ae=e[2]&&kr(e),ce=e[5]&&Br(e),le=e[6]&&Sr(e);return{c(){t=N("main"),n=N("div"),r=N("h2"),r.textContent="Nostr Signer Demo",o=F(),i=N("h2"),i.textContent="Installed Signers",s=F(),we.c(),a=F(),c=N("hr"),l=F(),u=N("button"),f=he("Get Public Key"),p=F(),se&&se.c(),w=F(),h=N("hr"),g=F(),b=N("h2"),b.textContent="Sign Event",P=F(),k=N("textarea"),O=F(),T=N("button"),_=he("Sign Event"),v=F(),ae&&ae.c(),H=F(),E=N("hr"),L=F(),U=N("h2"),U.textContent="Encryption",M=F(),q=N("input"),m=F(),x=N("textarea"),B=F(),R=N("div"),C=N("label"),A=N("input"),S=F(),I=N("span"),V=F(),W=N("span"),X=he(D),G=F(),pe=N("div"),ie=N("button"),xe=he("Encrypt Message"),Ae=F(),Q=N("button"),_e=he("Decrypt Message"),ht=F(),ce&&ce.c(),Jt=F(),le&&le.c(),u.disabled=d=!e[7],j(u,"class","svelte-v1ygji"),j(k,"placeholder","Event Content"),j(k,"class","svelte-v1ygji"),T.disabled=y=!e[7],j(T,"class","svelte-v1ygji"),j(q,"type","text"),j(q,"placeholder","Recipient Public Key"),j(q,"class","svelte-v1ygji"),j(x,"placeholder","Message to Encrypt"),j(x,"class","svelte-v1ygji"),j(A,"type","checkbox"),j(A,"class","svelte-v1ygji"),j(I,"class","slider svelte-v1ygji"),j(C,"class","switch svelte-v1ygji"),j(W,"class","toggle-text svelte-v1ygji"),j(R,"class","toggle-container svelte-v1ygji"),ie.disabled=Fe=!e[7],j(ie,"class","svelte-v1ygji"),Q.disabled=Ge=!e[7],j(Q,"class","svelte-v1ygji"),j(pe,"class","button-container svelte-v1ygji"),j(n,"class","container")},m(z,te){Ke(z,t,te),$(t,n),$(n,r),$(n,o),$(n,i),$(n,s),we.m(n,null),$(n,a),$(n,c),$(n,l),$(n,u),$(u,f),$(n,p),se&&se.m(n,null),$(n,w),$(n,h),$(n,g),$(n,b),$(n,P),$(n,k),Xe(k,e[1]),$(n,O),$(n,T),$(T,_),$(n,v),ae&&ae.m(n,null),$(n,H),$(n,E),$(n,L),$(n,U),$(n,M),$(n,q),Xe(q,e[3]),$(n,m),$(n,x),Xe(x,e[4]),$(n,B),$(n,R),$(R,C),$(C,A),A.checked=e[9],$(C,S),$(C,I),$(R,V),$(R,W),$(W,X),$(n,G),$(n,pe),$(pe,ie),$(ie,xe),$(pe,Ae),$(pe,Q),$(Q,_e),$(n,ht),ce&&ce.m(n,null),$(n,Jt),le&&le.m(n,null),Yt||(Xn=[Pe(u,"click",e[11]),Pe(k,"input",e[17]),Pe(T,"click",e[12]),Pe(q,"input",e[18]),Pe(x,"input",e[19]),Pe(A,"change",e[20]),Pe(ie,"click",e[13]),Pe(Q,"click",e[14])],Yt=!0)},p(z,[te]){Pt===(Pt=Qn(z))&&we?we.p(z,te):(we.d(1),we=Pt(z),we&&(we.c(),we.m(n,a))),te&128&&d!==(d=!z[7])&&(u.disabled=d),z[0]?se?se.p(z,te):(se=$r(z),se.c(),se.m(n,w)):se&&(se.d(1),se=null),te&2&&Xe(k,z[1]),te&128&&y!==(y=!z[7])&&(T.disabled=y),z[2]?ae?ae.p(z,te):(ae=kr(z),ae.c(),ae.m(n,H)):ae&&(ae.d(1),ae=null),te&8&&q.value!==z[3]&&Xe(q,z[3]),te&16&&Xe(x,z[4]),te&512&&(A.checked=z[9]),te&512&&D!==(D=z[9]?"NIP-44":"NIP-04")&&ft(X,D),te&128&&Fe!==(Fe=!z[7])&&(ie.disabled=Fe),te&128&&Ge!==(Ge=!z[7])&&(Q.disabled=Ge),z[5]?ce?ce.p(z,te):(ce=Br(z),ce.c(),ce.m(n,Jt)):ce&&(ce.d(1),ce=null),z[6]?le?le.p(z,te):(le=Sr(z),le.c(),le.m(n,null)):le&&(le.d(1),le=null)},i:ot,o:ot,d(z){z&&Ce(t),we.d(),se&&se.d(),ae&&ae.d(),ce&&ce.d(),le&&le.d(),Yt=!1,xt(Xn)}}}function Af(e,t,n){let r="",o="",i="",s="",a="",c="",l="",u=!1,f="",d=[],p=!1;function w(E){n(15,f=E.packageName)}async function h(){try{const E=await Le.getInstalledSignerApps();n(8,d=E.apps),console.log("Installed Signer Apps:",d)}catch(E){console.error("Error getting installed signer apps:",E)}}async function g(){if($e.getPlatform()==="android")try{await Le.setPackageName({packageName:f});const{installed:E}=await Le.isExternalSignerInstalled();n(7,u=E)}catch(E){console.error("Error checking signer installation:",E),n(7,u=!1)}else n(7,u=!0)}gi(async()=>{await h()});async function b(){try{if($e.getPlatform()==="web"&&window.nostr&&window.nostr.getPublicKey)n(0,r=await window.nostr.getPublicKey());else{const{npub:E}=await Le.getPublicKey();n(0,r=E)}}catch(E){console.error("Error getting public key:",E)}}async function P(){try{let{data:E}=dn(r);const L={kind:1,created_at:Math.round(Date.now()/1e3),content:o,tags:[],pubkey:E,id:"",sig:""};let U=bt(L);if(L.id=U,$e.getPlatform()==="web"&&window.nostr&&window.nostr.signEvent)n(2,i=JSON.stringify(await window.nostr.signEvent(L),null,2));else{const{event:M}=await Le.signEvent({eventJson:JSON.stringify(L),eventId:U,npub:E});n(2,i=JSON.stringify(JSON.parse(M),null,2))}}catch(E){console.error("Error signing event:",E)}}async function k(){try{if($e.getPlatform()==="web"&&window.nostr&&window.nostr.nip04&&window.nostr.nip04.encrypt)n(5,c=await window.nostr.nip04.encrypt(s,a));else{let{data:E}=dn(s);if(p){const{result:L}=await Le.nip44Encrypt({plainText:a,pubKey:E,npub:r});n(5,c=L)}else{const{result:L}=await Le.nip04Encrypt({plainText:a,pubKey:E,npub:r});n(5,c=L)}}}catch(E){console.error("Error encrypting message:",E)}}async function O(){try{if($e.getPlatform()==="web"&&window.nostr&&window.nostr.nip04&&window.nostr.nip04.decrypt)n(6,l=await window.nostr.nip04.decrypt(s,c));else{let{data:E}=dn(s);if(p){const{result:L}=await Le.nip44Decrypt({pubKey:E,npub:r,encryptedText:c});n(6,l=L)}else{const{result:L}=await Le.nip04Decrypt({pubKey:E,npub:r,encryptedText:c});n(6,l=L)}}}catch(E){console.error("Error decrypting message:",E)}}const T=E=>w(E);function _(){o=this.value,n(1,o)}function y(){s=this.value,n(3,s)}function v(){a=this.value,n(4,a)}function H(){p=this.checked,n(9,p)}return e.$$.update=()=>{e.$$.dirty&32768&&f&&g()},[r,o,i,s,a,c,l,u,d,p,w,b,P,k,O,f,T,_,y,v,H]}class _f extends Li{constructor(t){super(),_i(this,t,Af,xf,li,{})}}new _f({target:document.getElementById("app")});
